---
- summary: |
    Успешная авторизация пользователя
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться с корректным e-mail и паролем
  prerequisites: |
    no-data
  test-data: |
    nickname: "TestUserHexlet01"
    email: "testuserhexlet01@example.com"
    password: "StrongP@sswOrd123!"
    confirm_password: "StrongP@sswOrd123!"
  steps:
    - Нажать кнопку 'Зарегистрироваться' (Sign up)
    - Ввести никнейм
    - Ввести e-mail
    - Ввести пароль
    - Подтвердить пароль
    - Нажать кнопку 'Зарегистрироваться' (Submit)
  expected-result: |
     Пользователь успешно авторизован и перенаправлен на главную страницу

- summary: |
    Блокировка регистрации с незаполненными полями
  requirement: |
    Система должна предотвращать регистрацию и информировать пользователя о необходимости заполнения обязательных полей
  prerequisites: |
    no-data
  test-data: |
    Поле "Nickname": пустое ("")
    Поле "Email": пустое ("")
    Поле "Password": пустое ("")
    Поле "Password Confirmation": пустое ("")
  steps:
    - Оставить поля 'Nickname', 'Email', 'Password', 'Password Confirmation' пустыми.
    - Нажать кнопку 'Зарегистрироваться' (Submit)
  expected-result: |
    Отображается сообщение об обязательности заполнения полей. Пользователь остается на странице регистрации

- summary: |
    Блокировка регистрации с невалидным форматом Email
  requirement: |
    Система должна проверять формат Email и предотвращать регистрацию с невалидным Email
  prerequisites: |
    no-data
  test-data: |
    nickname: "TestUserInvalidEmail"
    email: "invalid-email-format" # или "test@domain", "test.com"
    password: "StrongP@sswOrd123!"
    confirm_password: "StrongP@sswOrd123!"
  steps:
    - Ввести никнейм
    - Ввести в Email данные 'invalid-email (или test@domain, test.com)'
    - Ввести пароль
    - Подтвердить пароль
    - Нажать кнопку 'Зарегистрироваться' (Submit)
  expected-result: |
    Регистрация не происходит. Появляется сообщение 'Недопустимый формат e-mail'

- summary: |
    Блокировка регистрации когда значения в полях 'Password' и 'Password Confirmation' не совпадают
  requirement: |
    Система должна проверять совпадение паролей и предотвращать регистрацию, если они не совпадают
  prerequisites: |
    no-data
  test-data: |
    nickname: "TestUserMismatchPass"
    email: "mismatchpass@example.com"
    password: "StrongP@sswOrd123!"
    confirm_password: "DifferentP@sswOrd456!"
  steps:
    - Нажать кнопку регистрации в правом верхнем углу (Sign up)
    - Ввести никнейм
    - Ввести e-mail
    - Ввести пароль
    - Ввести другой Пароль в поле 'Password Confirmation'
    - Нажать кнопку 'Зарегистрироваться' (Submit)
  expected-result: |
    Регистрация не происходит. Появляется сообщение 'Пароли не совпадают'

- summary: |
    Блокировка регистрации с Email, который уже используется другим пользователем
  requirement: |
    Система должна предотвращать регистрацию с дублирующимся Email
  prerequisites: |
    Существует аккаунт с Email 'existinguser@example.com'
  test-data: |
    nickname: "NewUserExistingEmail"
    email: "existinguser@example.com"
    password: "StrongP@sswOrd123!"
    confirm_password: "StrongP@sswOrd123!"
  steps:
    - Нажать кнопку регистрации в правом верхнем углу (Sign up)
    - Ввести никнейм
    - Ввести e-mail 'existinguser@example.com'
    - Ввести пароль
    - Подтвердить пароль
    - Нажать кнопку 'Зарегистрироваться' (Submit)
  expected-result: |
    Регистрация не происходит. Появляется сообщение 'Email уже используется'

- summary: |
    Блокировка регистрации с Никнеймом, который уже используется другим пользователем
  requirement: |
    Система должна предотвращать регистрацию с дублирующимся Никнеймом
  prerequisites: |
    Существует аккаунт с Никнеймом 'ExistingNickname'
  test-data: |
    nickname: "ExistingNickname"
    email: "newemailfornickname@example.com"
    password: "StrongP@sswOrd123!"
    confirm_password: "StrongP@sswOrd123!"
  steps:
    - Нажать кнопку регистрации в правом верхнем углу (Sign up)
    - Ввести Никнейм 'ExistingNickname'
    - Ввести e-mail
    - Ввести пароль
    - Подтвердить пароль
    - Нажать кнопку 'Зарегистрироваться' (Submit)
  expected-result: |
    Регистрация не происходит. Появляется сообщение 'Никнейм уже используется'

- summary: |
    Успешная регистрация/авторизация нового пользователя через Github
  requirement: |
    Система должна позволять новому пользователю создать учетную запись или авторизоваться, используя существующий аккаунт Github, после предоставления необходимых разрешений приложению
  prerequisites: |
    У пользователя есть активный и валидный аккаунт Github
    Сценарий, когда пользователь "впервые" регистрируется/авторизуется на платформе через данный Github-аккаунт
  test-data: |
    Данные валидного тестового аккаунта Github
  steps:
    - Нажать кнопку регистрации в правом верхнем углу (Sign up)
    - Нажать кнопку 'Sign up with Github'
    - Предоставить приложению необходимые разрешения
  expected-result: |
    Пользователь перенаправлен на главную страницу, в профиле указан вход через Github

- summary: |
    Успешная регистрация/авторизация нового пользователя через Discord
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться/войти в систему, используя свой аккаунт Discord
  prerequisites: |
    У пользователя есть активный и валидный аккаунт Discord
    Сценарий, когда пользователь "впервые" регистрируется/авторизуется на платформе через данный Discord-аккаунт
  test-data: |
    Данные валидного тестового аккаунта Discord
  steps:
    - Нажать кнопку регистрации в правом верхнем углу (Sign up)
    - Нажать кнопку 'Sign up with Discord'
    - Предоставить приложению необходимые разрешения
  expected-result: |
    Пользователь успешно зарегистрирован и авторизован в приложении

- summary: |
    Проверка корректности работы ссылки 'Sign In' для перехода на страницу входа
  requirement: |
    Пользователь должен иметь возможность перейти на страницу входа (Sign In) со страницы регистрации (Sign Up)
  prerequisites: |
    Пользователь находится на странице регистрации
  test-data: |
    no-data
  steps:
    - Нажать на ссылку 'Sign In' (внизу формы, 'If you have an account Sign In')
  expected-result: |
    Пользователь перенаправлен на страницу входа (Sign In). Отображается форма для ввода логина и пароля

- summary: |
    Успешный вход существующего пользователя с валидными учетными данными
  requirement: |
    При верном вводе логина и пароля пользователь должен войти в систему
  prerequisites: |
    no-data
  test-data: |
    login_or_email: "ExistingUserLogin"
    password: "ExistingUserP@sswOrd"
  steps:
    - Нажать кнопку авторизации в правом верхнем углу (Sign in)
    - Ввести логин
    - Ввести пароль
    - Нажать кнопку «Войти»
  expected-result: |
     Пользователь успешно авторизован и перенаправлен на главную страницу

- summary: |
    Проверка входа пользователя с несуществующими логином и паролем
  requirement: |
    При неправильном логине или пароле пользователь должен получить сообщение об ошибке
  prerequisites: |
    no-data
  test-data: |
    login_or_email: "NonExistentUser"
    password: "WrongPassword123"
  steps:
    - Нажать кнопку авторизации в правом верхнем углу (Sign in)
    - Ввести неверный логин
    - Ввести неверный пароль
    - Нажать кнопку «Войти»
  expected-result: |
    Появляется сообщение об ошибке 'Неверный логин или пароль'. Пользователь остается на странице входа

- summary: |
    Успешное создание новой игры с ботом
  requirement: |
    Зарегистрированный пользователь может создавать игру
  prerequisites: |
    Пользователь зарегистрирован и успешно аутентифицирован в системе
  test-data: |
    level_stars: 2
    game_type_opponent: "bot"
    time_control_minutes: 5
    task_selection_mode: "random"
    task_name_or_tag: ""
  steps:
    - Нажать кнопку 'Create a game' (или 'Создать игру')
    - В модальном окне "Create a game":
        - Выбрать уровень сложности
        - В секции "Game Type" нажать кнопку 'With a bot'
        - В секции "Time control" установить время
        - В секции "Choose task by name or tags" выбрать "random"
        - Нажать кнопку 'Create battle' (или 'Создать битву')
  expected-result: |
    Создана новая игра с выбранными параметрами, приглашён соперник

- summary: |
    Приглашения другого пользователя в игру
  requirement: |
    Пользователь может приглашать других пользователей в игру
  prerequisites: |
    Пользователь1 зарегистрирован и аутентифицирован
    Пользователь2 зарегистрирован и аутентифицирован
    Пользователь1 и Пользователь2 не находятся в одной игре
  test-data: |
    no-data
  steps:
    - Пользователь1 создаёт новую игру
    - Пользователь1 приглашает пользователя2
    - Пользователь2 принимает приглашение
  expected-result: |
    Оба пользователя перенаправлены в игровую комнату, где стартовала совместная игра

- summary: |
    Редактирования задачи двумя игроками в реальном времени
  requirement: |
    Система должна обеспечивать одновременное редактирование задачи для двух игроков с отображением кода соперника в реальном времени
  prerequisites: |
    Два пользователя в одной игре, задача открыта
  test-data: |
    no-data
  steps:
    - Игрок1 вносит изменение в свой редактор
    - Игрок2 наблюдает изменение кода соперника
    - Игрок2 вносит изменение в свой редактор
    - Игрок1 наблюдает изменение кода соперника
  expected-result: |
    В обоих редакторах в реальном времени отображаются изменения кода соперника

- summary: |
    Выбор уровня и типа задачи
  requirement: |
    Пользователь может выбирать уровень и тип задачи для соревнования
  prerequisites: |
    no-data
  test-data: |
    level: "Hard"
    task_type: "Математика"
    opponent_type: "bot"
  steps:
    - Нажать 'Создать игру'
    - Выбрать уровень 'Hard'
    - Выбрать тип задачи 'Математика'
    - Пригласить соперника
    - Подтвердить выбор
  expected-result: |
    Создана игра с выбранными типом и уровнем задачи

- summary: |
    Отображение результата после окончания игры
  requirement: |
    После окончания игры отображается результат
  prerequisites: |
    Пользователь завершил игру (например, сдал задачу или время истекло)
  test-data: |
    no-data
  steps:
    - Завершить игру (правильно решить задачу или дождаться окончания времени)
  expected-result: |
    На экране отображается результат игры (например 'победа', 'поражение')

- summary: |
    Отображение системы рейтингов и лидерборда
  requirement: |
    Присутствует система рейтингов и лидерборд
  prerequisites: |
    Несколько пользователей завершили игры с разными результатами
  test-data: |
    Пользователь1: 5 побед
    Пользователь2: 3 победы
    Пользователь3: 7 побед
  steps:
    - Открыть страницу лидерборда
  expected-result: |
    Пользователь видит свои текущие очки и позицию. Рейтинг корректно сортирован
